# Example configuration for Caddy Redirect Container

# Main domain (required)
CADDY_DOMAIN=example.com

# TLS configuration for automatic HTTPS (Let's Encrypt)
CADDY_TLS=tls admin@example.com

# Upstream server (where requests are forwarded)
CADDY_UPSTREAM=http://localhost:8080

# Additional security headers (added to default security headers)
# Default headers: X-Content-Type-Options, X-Frame-Options, Referrer-Policy
CADDY_SECURITY_HEADERS=Permissions-Policy "geolocation=(), microphone=()"

# Add additional headers
CADDY_HEADERS=header X-Forwarded-Proto {scheme}

# Enable rate limiting
CADDY_RATE_LIMIT=rate_limit { zone static { key {remote} window 1m burst 10 } }

# Enable basic auth (hash password with: caddy hash-password)
CADDY_BASIC_AUTH=basicauth { admin $2a$14$9xv0MtX8mJ2N/.5jUwJcO8qhQ5QE2ZrGj5JvZK5vT5rXnHkYjx6y }

# Define redirects
CADDY_REDIRECTS=redir /old-path /new-path permanent

# Additional proxy headers
CADDY_PROXY_HEADERS=header_up Host {host}

# Additional domains (comma separated)
CADDY_ADDITIONAL_DOMAINS=www.example.com,api.example.com
